---
title: Whodunnit? Network Analysis of British Mysteries
author: Chris Cote
date: '2020-02-18'
slug: whodunnit-network-analysis-of-british-mysteries
categories:
  - network
tags: []
---
```{r setup}
knitr::opts_chunk$set(warning = FALSE, message = FALSE)
library(tidyverse)
library(tidygraph)
library(ggraph)

library(britishcharacters) #remotes::install_github("cjcote/britishcharacters)
```

```{r}
characters <- read_csv("https://raw.githubusercontent.com/cjcote/blog/master/public/characters.csv")

#or load from package {britishcharacters} characters <- britishcharacters::characters

characters
```
```{r}
characters %>% distinct(show)
britishcharacters::episode_search(show_select = "Foyles War",season_select = 1, episode_select = 1)

```

Find the most characters in the most number of episodes
```{r}
characters %>% 
  count(character, sort = TRUE) %>% 
  slice(1:15)
```

```{r}
characters %>% 
  count(character, sort = TRUE) %>% 
  slice(1:15) %>% 
  ggplot() + geom_col(aes(fct_reorder(character, n), n), fill = "cornflowerblue")+
  coord_flip() +
  theme(panel.background = element_blank(),
        plot.background = element_blank(),
        panel.grid = element_line(color = "gray90"))
```

```{r}

britishcharacters::map_character("Mark Williams")

```


What episode has the most people?
```{r}
characters %>% 
  group_by(show, season, episode) %>% 
  count(sort = TRUE)
```

Graph it!
```{r}

britishcharacters::map_episode("Midsomer Murders", season = 1, episode_selected = 2)


```

